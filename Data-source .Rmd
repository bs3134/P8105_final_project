---
title: "Data_source"
author: "Haowei Ni"
date: "2018/11/19"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
library(tidyverse)
library(dplyr)
library(stringr)
library(readr)
library(readxl)
```

Read original data 

```{r input_heart_disease_data}

heart_disease =  read_csv("./data/Heart_Disease_Mortality_Data_Among_US_Adults__35___by_State_Territory_and_County.csv") %>%
  janitor::clean_names() %>%
  rename(state = location_abbr) %>%
  mutate(state = state.name[match(state, state.abb)])
``` 




```{r}
library(readr)
library(tidyverse)
airquality_2015 = read_csv("./data/airquality.csv") %>%
  janitor::clean_names() %>%
  select(state, county, pm2.5)
  
  
heart_data = left_join(airquality, heart_disease) 
inner_join(airquality, heart_disease)  
anti_join(airquality, heart_disease) 

```

Add obesity data

```{r add_obesity_data}

obesity_data = read_csv("./data/National_Obesity_By_State.csv") %>%
  janitor::clean_names() %>%
  rename(state = name) %>%
  rename(obesity_percentage = obesity) %>%
  select(state, obesity_percentage) 

left_join(heart_disease, obesity_data)
```

Add stroke data

```{r add_stroke_data}
library(readr)
stroke_data = read_csv("data/Stroke_Mortality_Data_Among_US_Adults__35___by_State_Territory_and_County.csv") 
left_join(heart_disease,stroke_data)

```

Add income

```{r}

income_data = read_excel("data /income_2015.xlsx", range = "A3:D55") %>%
  janitor::clean_names() %>%
  rename(locationabbr = state) %>%
  mutate(state = state.name[match(income_data$state, state.abb)])

data_with_income = left_join(heart_disease,income_data, by = "state")
```

